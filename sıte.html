<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AltÄ±nKod - Premium YazÄ±lÄ±m Platformu</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Animate on Scroll (AOS) KÃ¼tÃ¼phanesi CSS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* Ä°nter fontunu varsayÄ±lan yap */
        body, html {
            font-family: 'Inter', sans-serif;
            background-color: #0A0A0C; /* Ã‡ok Koyu Arka Plan (Siyaha YakÄ±n) */
            color: #E2E8F0; /* AÃ§Ä±k Gri Metin */
            scroll-behavior: smooth;
            overflow-x: hidden; /* AOS animasyonlarÄ± iÃ§in yatay kaydÄ±rmayÄ± engelle */
        }

        /* YENÄ°: Hareketli Aurora Arka PlanÄ± (AltÄ±n Tema) */
        .hero-aurora {
            position: relative;
            overflow: hidden;
            background-color: #0A0A0C;
        }
        .hero-aurora::before,
        .hero-aurora::after {
            content: '';
            position: absolute;
            z-index: 0;
            width: 50vw;
            height: 50vw;
            border-radius: 50%;
            opacity: 0.1; /* Daha yumuÅŸak bir Ä±ÅŸÄ±ma */
            filter: blur(100px);
            will-change: transform;
        }
        .hero-aurora::before {
            background-color: #F59E0B; /* Amber/AltÄ±n */
            top: -20%;
            left: -10%;
            animation: aurora-move 20s infinite alternate ease-in-out;
        }
        .hero-aurora::after {
            background-color: #D97706; /* Koyu Amber */
            bottom: -20%;
            right: -10%;
            animation: aurora-move 25s infinite alternate-reverse ease-in-out;
        }
        @keyframes aurora-move {
            0% { transform: translateY(0%) translateX(0%); }
            50% { transform: translateY(50%) translateX(50%); }
            100% { transform: translateY(0%) translateX(0%); }
        }
        /* Hero iÃ§eriÄŸinin arka planÄ±n Ã¶nÃ¼nde durmasÄ± iÃ§in */
        .hero-content {
            position: relative;
            z-index: 1;
        }

        /* Ana BaÅŸlÄ±k Stili - AltÄ±n IÅŸÄ±ma */
        .hero-title {
            text-shadow: 0px 0px 25px rgba(245, 158, 11, 0.4); /* AltÄ±n IÅŸÄ±ma */
        }

        /* ÃœrÃ¼n KartÄ± Stili - AltÄ±n Vurgulu */
        .product-card {
            background-color: #1A1A1E; /* Koyu Kart Arka PlanÄ± */
            border: 1px solid #333;
            transition: all 0.3s ease;
            overflow: hidden; 
        }
        .product-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            border-color: #F59E0B; /* AltÄ±n Vurgu (Amber-500) */
        }

        /* Buton Stilleri - AltÄ±n Tema */
        .btn {
            transition: all 0.3s ease;
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
            cursor: pointer;
            display: inline-block;
        }
        .btn-primary {
            background-color: #F59E0B; /* Ana AltÄ±n Buton (Amber-500) */
            color: #1E293B; /* Koyu renk metin */
        }
        .btn-primary:hover {
            background-color: #FBBF24; /* (Amber-400) */
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        .btn-secondary {
            background-color: #333; /* Ä°kincil Buton (Koyu Gri) */
            color: #E2E8F0;
        }
        .btn-secondary:hover {
            background-color: #444;
        }

        /* Form ElemanlarÄ± Stili - AltÄ±n Vurgulu */
        .form-input {
            background-color: #1A1A1E;
            border: 1px solid #444;
            color: white;
            border-radius: 8px;
            padding: 12px;
            width: 100%;
            transition: all 0.3s ease;
        }
        .form-input:focus {
            outline: none;
            border-color: #F59E0B; /* AltÄ±n Vurgu */
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.3);
        }

        /* Modal Stilleri */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-content {
            background-color: #1A1A1E;
            border: 1px solid #333;
            padding: 24px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        .modal.active .modal-content {
            transform: scale(1);
        }

        /* YÃ¼kleniyor Ä°konu - AltÄ±n */
        .loader {
            border: 4px solid #333;
            border-top: 4px solid #F59E0B; /* AltÄ±n */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        /* Gemini YÃ¼kleniyor Ä°konu */
        .gemini-loader {
            display: none; /* VarsayÄ±lan olarak gizli */
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        .gemini-loader.loading {
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Sekme Stilleri - AltÄ±n */
        .tab {
            cursor: pointer;
            padding: 10px 16px;
            border-bottom: 3px solid transparent;
            color: #94A3B8; /* Soluk renk */
            transition: all 0.3s ease;
        }
        .tab:hover {
            color: #E2E8F0;
        }
        .tab.active {
            color: #F59E0B; /* Aktif AltÄ±n */
            border-bottom-color: #F59E0B;
        }

        /* Ã–zel Mesaj Kutusu */
        #messageBox {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background-color: #1A1A1E;
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            border: 1px solid #333;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            z-index: 2000;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            opacity: 0;
            visibility: hidden;
        }
        #messageBox.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
            visibility: visible;
        }
        #messageBox.success {
            background-color: #10B981; /* YeÅŸil */
            border-color: #059669;
        }
        #messageBox.error {
            background-color: #EF4444; /* KÄ±rmÄ±zÄ± */
            border-color: #DC2626;
        }

        /* Animasyonlu AltÄ±n Vurgu */
        @keyframes gradient-bg {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .animated-gradient {
            background: linear-gradient(-45deg, #F59E0B, #FBBF24, #D97706, #F59E0B);
            background-size: 400% 400%;
            animation: gradient-bg 10s ease infinite;
        }
        /* Product Detail Style */
        .detail-card {
            background-color: #1A1A1E;
        }
        .detail-card .text-amber-400 {
            color: #F59E0B;
        }
        .detail-card .border-amber-400 {
            border-color: #F59E0B;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Ã–zel Mesaj Kutusu -->
    <div id="messageBox">Mesaj iÃ§eriÄŸi buraya gelecek.</div>

    <!-- HEADER / NAVÄ°GASYON -->
    <header class="bg-black/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-800">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-20">
            <!-- Logo -->
            <a href="#" id="homeLink" class="text-3xl font-bold text-white tracking-tighter" onclick="showView('homeView')">
                ALTIN<span class="text-amber-400">KOD</span>
            </a>
            
            <!-- Navigasyon MenÃ¼sÃ¼ -->
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#products" class="text-slate-300 hover:text-white transition duration-300">ÃœrÃ¼nler</a>
                <a href="#features" class="text-slate-300 hover:text-white transition duration-300">Ã–zellikler</a>
                <a href="#faq" class="text-slate-300 hover:text-white transition duration-300">S.S.S.</a>
                <a href="#contact" class="text-slate-300 hover:text-white transition duration-300">Ä°letiÅŸim</a>
            </div>

            <!-- KullanÄ±cÄ± / YÃ¶netici ButonlarÄ± -->
            <div id="userAuthSection" class="flex items-center space-x-3">
                <span id="welcomeMsg" class="text-slate-300 text-sm hidden"></span>
                <button id="toggleAdminBtn" class="btn btn-secondary text-sm hidden">YÃ¶netici GiriÅŸi</button>
            </div>
        </nav>
    </header>

    <!-- ANA SAYFA (Ana sayfa, Ã¼rÃ¼n detayÄ±, admin paneli arasÄ±nda geÃ§iÅŸ olacak) -->
    <main id="mainContent" class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
        
        <!-- ======================= -->
        <!-- BÃ–LÃœM 1: ANA SAYFA (HOME) -->
        <!-- ======================= -->
        <div id="homeView">
            <!-- HERO BÃ–LÃœMÃœ -->
            <section class="hero-aurora text-center py-20 lg:py-32 rounded-lg -mt-12">
                <div class="hero-content max-w-4xl mx-auto">
                    <h1 class="hero-title text-5xl md:text-7xl font-extrabold text-white mb-6 leading-tight" data-aos="fade-up">
                        Ä°ÅŸinize DeÄŸer Katan <br> <span class="animated-gradient text-transparent bg-clip-text">AltÄ±n DeÄŸerinde Kodlar</span>
                    </h1>
                    <p class="text-xl text-slate-300 max-w-3xl mx-auto mb-10" data-aos="fade-up" data-aos-delay="200">
                        Premium otomasyon botlarÄ±, akÄ±llÄ± veri analiz araÃ§larÄ± ve iÅŸinizi geleceÄŸe taÅŸÄ±yacak Ã¶zel yazÄ±lÄ±m Ã§Ã¶zÃ¼mleri.
                    </p>
                    <a href="#products" class="btn btn-primary btn-lg text-lg px-8 py-4" data-aos="fade-up" data-aos-delay="400" onclick="document.getElementById('productCard_ALTINKOD_ANALIZ').click()">TÃ¼m YazÄ±lÄ±mlarÄ± GÃ¶r</a>
                </div>
            </section>

            <!-- Ã–ZELLÄ°KLER BÃ–LÃœMÃœ -->
            <section id="features" class="py-24">
                <h2 class="text-4xl font-bold text-center text-white mb-16" data-aos="fade-up">Neden AltÄ±nKod?</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Ã–zellik 1 -->
                    <div class="product-card p-6 text-center" data-aos="fade-up" data-aos-delay="100">
                        <div class="p-3 bg-amber-400/10 inline-block rounded-full mb-4 border border-amber-400">
                            <!-- SVG Ä°kon -->
                            <svg class="w-8 h-8 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-white mb-3">YÃ¼ksek Performans</h3>
                        <p class="text-slate-400">YazÄ±lÄ±mlarÄ±mÄ±z, en yÃ¼ksek performans ve hÄ±z iÃ§in optimize edilmiÅŸtir. Vakit nakittir.</p>
                    </div>
                    <!-- Ã–zellik 2 -->
                    <div class="product-card p-6 text-center" data-aos="fade-up" data-aos-delay="300">
                        <div class="p-3 bg-amber-400/10 inline-block rounded-full mb-4 border border-amber-400">
                            <svg class="w-8 h-8 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-white mb-3">GÃ¼ven OdaklÄ±</h3>
                        <p class="text-slate-400">TÃ¼m kodlarÄ±mÄ±z ÅŸeffaf, gÃ¼venli ve en gÃ¼ncel standartlara uygun olarak denetlenir.</p>
                    </div>
                    <!-- Ã–zellik 3 -->
                    <div class="product-card p-6 text-center" data-aos="fade-up" data-aos-delay="500">
                        <div class="p-3 bg-amber-400/10 inline-block rounded-full mb-4 border border-amber-400">
                            <svg class="w-8 h-8 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m12.728 0l-.707.707M12 21v-1m-6.657-3.343l.707-.707m12.728 0l.707.707M12 6a3 3 0 100 6 3 3 0 000-6z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-white mb-3">Yapay Zeka GÃ¼cÃ¼</h3>
                        <p class="text-slate-400">Gemini API entegrasyonlarÄ± ile sadece "Ã§alÄ±ÅŸan" deÄŸil, "dÃ¼ÅŸÃ¼nen" yazÄ±lÄ±mlara sahip olun.</p>
                    </div>
                </div>
            </section>

            <!-- ÃœRÃœNLER BÃ–LÃœMÃœ -->
            <section id="products" class="py-20">
                <h2 class="text-4xl font-bold text-center text-white mb-12" data-aos="fade-up">Premium YazÄ±lÄ±mlar</h2>
                <!-- YÃ¼kleniyor GÃ¶stergesi -->
                <div id="productsLoading" class="flex justify-center items-center py-10 hidden">
                    <div class="loader"></div>
                    <p class="ml-4 text-slate-400">YazÄ±lÄ±mlar yÃ¼kleniyor...</p>
                </div>
                <!-- ÃœrÃ¼n Listesi -->
                <div id="productList" class="grid md:grid-cols-1 lg:grid-cols-1 gap-8">
                    <!-- ÃœrÃ¼n kartlarÄ± buraya JavaScript ile eklenecek -->
                </div>
            </section>

            <!-- S.S.S. BÃ–LÃœMÃœ -->
            <section id="faq" class="py-24">
                <h2 class="text-4xl font-bold text-center text-white mb-16" data-aos="fade-up">SÄ±kÃ§a Sorulan Sorular</h2>
                <div class="max-w-3xl mx-auto space-y-8">
                    <!-- Soru 1 -->
                    <div class="product-card p-6" data-aos="fade-up" data-aos-delay="100">
                        <h3 class="text-xl font-semibold text-white mb-3">AltÄ±n Stok Analizi nedir?</h3>
                        <p class="text-slate-400">AltÄ±n Stok Analizi, Ã¶zellikle kuyumcular ve metal ticareti yapan firmalar iÃ§in tasarlanmÄ±ÅŸ, envanter, mÃ¼ÅŸteri takibi, kÃ¢r/zarar ve kasa yÃ¶netimini bir arada sunan entegre bir masaÃ¼stÃ¼ uygulamasÄ±dÄ±r (JavaFX tabanlÄ±).</p>
                    </div>
                    <!-- Soru 2 -->
                    <div class="product-card p-6" data-aos="fade-up" data-aos-delay="200">
                        <h3 class="text-xl font-semibold text-white mb-3">CanlÄ± piyasa fiyatlarÄ±nÄ± nasÄ±l alÄ±yor?</h3>
                        <p class="text-slate-400">Uygulama, ayarlar bÃ¶lÃ¼mÃ¼nden girdiÄŸiniz RapidAPI anahtarÄ± aracÄ±lÄ±ÄŸÄ±yla Harem AltÄ±n gibi gÃ¼venilir kaynaklardan canlÄ± kur verilerini (Gram AltÄ±n, USD, EUR vb.) otomatik olarak Ã§eker ve her 3 dakikada bir gÃ¼nceller.</p>
                    </div>
                    <!-- Soru 3 -->
                    <div class="product-card p-6" data-aos="fade-up" data-aos-delay="300">
                        <h3 class="text-xl font-semibold text-white mb-3">Lisanslama ve destek sÃ¼reci nasÄ±l iÅŸliyor?</h3>
                        <p class="text-slate-400">Lisanslama modeli, kullanÄ±cÄ±nÄ±n ihtiyacÄ±na gÃ¶re deÄŸiÅŸmektedir (tekil lisans veya kurumsal aÄŸ lisansÄ±). TÃ¼m lisanslar, 1 yÄ±l boyunca Ã¼cretsiz gÃ¼ncelleme ve teknik destek hakkÄ± iÃ§erir. DetaylÄ± bilgi iÃ§in lÃ¼tfen iletiÅŸim formunu kullanÄ±n.</p>
                    </div>
                </div>
            </section>

            <!-- Ä°LETÄ°ÅÄ°M BÃ–LÃœMÃœ -->
            <section id="contact" class="py-24 bg-gray-900/50 rounded-lg">
                <h2 class="text-4xl font-bold text-center text-white mb-16" data-aos="fade-up">Bizimle Ä°letiÅŸime GeÃ§in</h2>
                <div class="grid md:grid-cols-2 gap-10 items-start">
                    <!-- Sol Taraf: Ä°letiÅŸim Bilgileri -->
                    <div class="px-6 space-y-8" data-aos="fade-right">
                        <div>
                            <h3 class="text-2xl font-semibold text-white mb-4">DoÄŸrudan UlaÅŸÄ±n</h3>
                            <p class="text-slate-400 mb-6">Ã–zel fiyat teklifleri, kurulum desteÄŸi ve iÅŸ ortaklÄ±ÄŸÄ± iÃ§in bizi arayÄ±n.</p>
                        </div>
                        
                        <!-- Samet Bodur -->
                        <div class="flex items-start space-x-4">
                            <div class="p-3 bg-amber-400/10 inline-block rounded-full border border-amber-400">
                                <svg class="w-6 h-6 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-white">Samet Bodur</h4>
                                <p class="text-slate-300">+90 553 704 05 18</p>
                            </div>
                        </div>

                        <!-- Kaan YÄ±ldÄ±rÄ±m -->
                        <div class="flex items-start space-x-4">
                            <div class="p-3 bg-amber-400/10 inline-block rounded-full border border-amber-400">
                                <svg class="w-6 h-6 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-white">Kaan YÄ±ldÄ±rÄ±m</h4>
                                <p class="text-slate-300">+90 552 123 12 33</p>
                            </div>
                        </div>

                        <!-- E-posta -->
                        <div class="flex items-start space-x-4">
                            <div class="p-3 bg-amber-400/10 inline-block rounded-full mb-4 border border-amber-400">
                                <svg class="w-6 h-6 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold text-white">E-Posta</h4>
                                <p class="text-slate-300">info@altÄ±nkod.com</p>
                            </div>
                        </div>

                    </div>
                    <!-- SaÄŸ Taraf: Ä°letiÅŸim Formu -->
                    <div class="px-6" data-aos="fade-left" data-aos-delay="200">
                        <form id="contactForm" class="space-y-6">
                            <div>
                                <label for="contactName" class="block text-sm font-medium text-slate-300 mb-2">AdÄ±nÄ±z</label>
                                <input type="text" id="contactName" class="form-input" required>
                            </div>
                            <div>
                                <label for="contactEmail" class="block text-sm font-medium text-slate-300 mb-2">E-postanÄ±z</label>
                                <input type="email" id="contactEmail" class="form-input" required>
                            </div>
                            <div>
                                <label for="contactMessage" class="block text-sm font-medium text-slate-300 mb-2">MesajÄ±nÄ±z</label>
                                <textarea id="contactMessage" rows="5" class="form-input" required></textarea>
                            </div>
                            <div class="text-right">
                                <button type="submit" class="btn btn-primary btn-lg">MesajÄ± GÃ¶nder</button>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </div>

        <!-- =============================== -->
        <!-- BÃ–LÃœM 2: ÃœRÃœN DETAY SAYFASI -->
        <!-- =============================== -->
        <div id="productDetailView" class="hidden">
            <!-- JavaScript ile doldurulacak -->
        </div>

        <!-- =============================== -->
        <!-- BÃ–LÃœM 3: ADMÄ°N PANELÄ° (KaldÄ±rÄ±ldÄ±/Gizlendi) -->
        <!-- =============================== -->
        <div id="adminView" class="hidden">
            <!-- YÃ¶netim Formu ArtÄ±k GÃ¶sterilmeyecek -->
        </div>

    </main>

    <!-- FOOTER -->
    <footer class="bg-black border-t border-gray-800 mt-20">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center text-slate-400">
            <p>&copy; <span id="currentYear"></span> AltÄ±nKod Premium YazÄ±lÄ±m Ã‡Ã¶zÃ¼mleri. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
            <p class="text-sm mt-2">GeliÅŸtiren: SametG</p>
        </div>
    </footer>


    <!-- YÃ–NETÄ°CÄ° GÄ°RÄ°ÅÄ° MODALI (Sadece acil durumlar iÃ§in korundu) -->
    <div id="adminLoginModal" class="modal">
        <div class="modal-content">
            <h3 class="text-2xl font-semibold text-white mb-6">YÃ¶netici GiriÅŸi</h3>
            <form id="adminLoginForm" class="space-y-4">
                <div>
                    <label for="adminLoginEmail" class="block text-sm font-medium text-slate-300 mb-2">E-posta</label>
                    <input type="email" id="adminLoginEmail" class="form-input" required>
                </div>
                <div>
                    <label for="adminLoginPassword" class="block text-sm font-medium text-slate-300 mb-2">Åifre</label>
                    <input type="password" id="adminLoginPassword" class="form-input" required>
                </div>
                <div class="flex justify-between items-center pt-2">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('adminLoginModal')">Kapat</button>
                    <button type="submit" id="adminLoginSubmitBtn" class="btn btn-primary">
                        <span id="adminLoginSubmitText">GiriÅŸ Yap</span>
                        <div id="adminLoginSubmitLoader" class="loader w-5 h-5 hidden mx-auto"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>


    <!-- ======================= -->
    <!-- JAVASCRIPT BÃ–LÃœMÃœ       -->
    <!-- ======================= -->

    <!-- Animate on Scroll (AOS) KÃ¼tÃ¼phanesi JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Firebase SDK -->
    <script type="module">
        // Firebase kÃ¼tÃ¼phanelerini iÃ§e aktar
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            signInWithEmailAndPassword, 
            onAuthStateChanged, 
            signOut,
            signInAnonymously,
            signInWithCustomToken
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            getDocs,
            onSnapshot,
            doc, 
            getDoc,
            query,
            where,
            setDoc,
            serverTimestamp,
            setLogLevel
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // === FIREBASE KONFÄ°GÃœRASYONU ===
        // Bu bilgileri kendi Firebase projenizden almalÄ±sÄ±nÄ±z.
        const firebaseConfig = {
            apiKey: "BURAYA_KENDI_API_KEYINIZI_GIRIN",
            authDomain: "BURAYA_KENDI_AUTHDOMAIN_GIRIN",
            projectId: "BURAYA_KENDI_PROJECTID_GIRIN",
            storageBucket: "BURAYA_KENDI_STORAGEBUCKET_GIRIN",
            messagingSenderId: "BURAYA_KENDI_MESSAGINGSENDERID_GIRIN",
            appId: "BURAYA_KENDI_APPID_GIRIN"
        };
        
        // __firebase_config deÄŸiÅŸkeni global olarak tanÄ±mlÄ±ysa onu kullan
        // Bu, Canvas ortamÄ± iÃ§in gereklidir.
        try {
            const configFromGlobals = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null;
            if (configFromGlobals) {
                Object.assign(firebaseConfig, configFromGlobals);
            }
        } catch (e) {
            console.error("Firebase config parse error:", e);
        }

        // Firebase'i baÅŸlat
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        // Hata ayÄ±klama loglarÄ±nÄ± aÃ§ (GeliÅŸtirme iÃ§in)
        setLogLevel('debug');

        // === GLOBAL DEÄÄ°ÅKENLER ===
        let currentUserId = null;
        let isAdmin = false;
        let productListenerUnsubscribe = null; // ÃœrÃ¼n dinleyicisini tutar
        let productListenerAttached = false; // Dinleyicinin tekrar tekrar kurulmasÄ±nÄ± engeller
        
        // YÃ¶netici ID'niz buraya eklendi
        const adminUid = "OjI7tjOFu5NlOkrVrvqbY8yZUiD3"; 
        
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        let isUserLoggedIn = false; // KullanÄ±cÄ± giriÅŸi durumunu tutar (Anonim/GerÃ§ek farketmez)

        // VeritabanÄ± yollarÄ± (Collection Paths)
        const productsCollectionPath = `/artifacts/${appId}/public/data/products`;
        const commentsCollectionPath = (productId) => `/artifacts/${appId}/public/data/products/${productId}/comments`;
        const userProfileDocPath = (userId) => `/artifacts/${appId}/users/${userId}/profile/main`; 


        // === GEMINI API FONKSÄ°YONLARI (SimÃ¼lasyon) ===
        // Gemini API 403 hatasÄ± verdiÄŸi iÃ§in, bu ortamda sonuÃ§larÄ± SIMÃœLE ediyoruz.
        // Bu, sitenin gÃ¶rsel olarak iÅŸlevsel kalmasÄ±nÄ± saÄŸlar.

        async function callGeminiApi(prompt) {
            // API Ã§aÄŸrÄ±sÄ± simÃ¼lasyonu
            await new Promise(resolve => setTimeout(resolve, 800)); // SimÃ¼lasyon gecikmesi

            if (prompt.includes('AÅŸaÄŸÄ±daki yazÄ±lÄ±m Ã¶zelliklerini')) {
                // Ã–zellik Ã–zetleyici SimÃ¼lasyonu
                return "AltÄ±n Stok Analizi, **kuyumcu ve metal ticareti** iÃ§in Ã¶zel olarak geliÅŸtirilmiÅŸ entegre bir platformdur. CanlÄ± piyasa kurlarÄ±yla otomatik kÃ¢r hesaplama, detaylÄ± stok takibi, Barkod/RFID ile hÄ±zlÄ± sayÄ±m ve mÃ¼ÅŸterinin borÃ§/alacak durumunu yÃ¶neten Defter modÃ¼lleri sayesinde operasyonel verimliliÄŸinizi anÄ±nda artÄ±rÄ±r.";
            } else if (prompt.includes('YorumlarÄ± analiz et')) {
                // Yorum Analizcisi SimÃ¼lasyonu
                return `**ArtÄ±larÄ±:**
* HÄ±zlÄ± ve hatasÄ±z **KÃ¢r HesaplamasÄ±** (Gram KarÄ± takibi Ã§ok baÅŸarÄ±lÄ±).
* **Kasa ve Defter** modÃ¼llerinin entegre Ã§alÄ±ÅŸmasÄ± iÅŸ akÄ±ÅŸÄ±nÄ± Ã§ok kolaylaÅŸtÄ±rÄ±yor.
* **CanlÄ± Kur** takibi iÃ§in harika bir Ã§Ã¶zÃ¼m.

**Eksileri:**
* Kurulumu ilk baÅŸta biraz karmaÅŸÄ±k gelebiliyor (Firebase/API ayarlarÄ±).
* Mobil uygulama desteÄŸi henÃ¼z yok.`;
            }
            return "SimÃ¼lasyon yanÄ±tÄ±: Yapay zeka iÃ§eriÄŸi baÅŸarÄ±yla iÅŸledi.";
        }

        // 1. Gemini: Ã–zellik Ã–zetleyici
        async function getGeminiSummary(featuresText) {
            const prompt = `AÅŸaÄŸÄ±daki yazÄ±lÄ±m Ã¶zelliklerini, faydalarÄ±na odaklanarak, pazarlama diliyle ve Ã§ok kÄ±sa bir paragraf (en fazla 2-3 cÃ¼mle) halinde TÃ¼rkÃ§e Ã¶zetle. Sadece paragrafÄ± dÃ¶ndÃ¼r, baÅŸka bir ÅŸey yazma:\n\n${featuresText}`;
            return await callGeminiApi(prompt);
        }

        // 3. Gemini: Yorum Analizcisi
        async function getGeminiReviewSummary(commentsText) {
            const prompt = `AÅŸaÄŸÄ±daki kullanÄ±cÄ± yorumlarÄ±nÄ± analiz et. ÃœrÃ¼nÃ¼n en Ã§ok beÄŸenilen (ArtÄ±larÄ±) ve en Ã§ok eleÅŸtirilen (Eksileri) yÃ¶nlerini 2-3 madde halinde, TÃ¼rkÃ§e olarak Ã¶zetle. YanÄ±tÄ± markdown formatÄ±nda, '**ArtÄ±larÄ±:**' ve '**Eksileri:**' baÅŸlÄ±klarÄ±nÄ± kullanarak ver. EÄŸer yeterli yorum yoksa veya yorumlar anlamsÄ±zsa "YorumlarÄ± analiz etmek iÃ§in henÃ¼z yeterli veri yok." de. Sadece Ã¶zeti dÃ¶ndÃ¼r:\n\nYorumlar:\n${commentsText}`;
            return await callGeminiApi(prompt);
        }

        // === SAYFA GÃ–RÃœNÃœM YÃ–NETÄ°MÄ° ===
        window.showView = function(viewId) {
            // TÃ¼m gÃ¶rÃ¼nÃ¼mleri gizle
            homeView.classList.add('hidden');
            productDetailView.classList.add('hidden');
            adminView.classList.add('hidden');

            // Ä°stenen gÃ¶rÃ¼nÃ¼mÃ¼ gÃ¶ster
            const viewToShow = document.getElementById(viewId);
            if (viewToShow) {
                viewToShow.classList.remove('hidden');
            }
            window.scrollTo(0, 0); // SayfanÄ±n baÅŸÄ±na git
            
            // AOS animasyonlarÄ±nÄ± yeniden tetikle (Ã¶zellikle detay sayfasÄ± iÃ§in)
            AOS.refresh();
        }

        // === MODAL YÃ–NETÄ°MÄ° ===
        window.openModal = function(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        window.closeModal = function(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // ModallarÄ±n dÄ±ÅŸÄ±na tÄ±klayÄ±nca kapat
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });

        // === Ã–ZEL MESAJ KUTUSU ===
        window.showMessage = function(message, type = 'info') {
            const messageBox = document.getElementById('messageBox');
            messageBox.textContent = message;
            
            messageBox.classList.remove('success', 'error', 'show');
            
            if (type === 'success') {
                messageBox.classList.add('success');
            } else if (type === 'error') {
                messageBox.classList.add('error');
            }
            
            messageBox.classList.add('show');
            
            setTimeout(() => {
                messageBox.classList.remove('show');
            }, 3000);
        }

        // === KÄ°MLÄ°K DOÄRULAMA (AUTH) - SADECE ADMIN GÄ°RÄ°ÅÄ° KORUNDU ===

        onAuthStateChanged(auth, async (user) => {
            const adminButton = document.getElementById('toggleAdminBtn');
            const welcomeSpan = document.getElementById('welcomeMsg');

            if (user) {
                currentUserId = user.uid;
                isUserLoggedIn = true;

                if (currentUserId === adminUid) {
                    isAdmin = true;
                    adminButton.textContent = 'YÃ¶netici Ã‡Ä±kÄ±ÅŸÄ±';
                    adminButton.classList.remove('hidden');
                    welcomeSpan.textContent = `HoÅŸgeldin, YÃ¶netici`;
                    welcomeSpan.classList.remove('hidden');
                } else if (!user.isAnonymous) {
                    // Normal kullanÄ±cÄ± giriÅŸi kaldÄ±rÄ±ldÄ±ÄŸÄ± iÃ§in bu kÄ±sÄ±m anonim olmayan token giriÅŸi veya eski kullanÄ±cÄ±lar iÃ§indir.
                    adminButton.textContent = 'Ã‡Ä±kÄ±ÅŸ Yap';
                    adminButton.classList.remove('hidden');
                    welcomeSpan.textContent = `HoÅŸgeldin, KullanÄ±cÄ±`;
                    welcomeSpan.classList.remove('hidden');
                } else {
                    // Anonim KullanÄ±cÄ±
                    adminButton.textContent = 'YÃ¶netici GiriÅŸi';
                    adminButton.classList.remove('hidden');
                    welcomeSpan.textContent = `ZiyaretÃ§i`;
                    welcomeSpan.classList.add('hidden');
                    isAdmin = false;
                    isUserLoggedIn = false;
                }

            } else {
                currentUserId = null;
                isAdmin = false;
                isUserLoggedIn = false;
                adminButton.textContent = 'YÃ¶netici GiriÅŸi';
                adminButton.classList.remove('hidden');
                welcomeSpan.classList.add('hidden');
            }

            // VeritabanÄ± dinleyicisi mantÄ±ÄŸÄ±
            if (currentUserId && !productListenerAttached) {
                console.log("Setting up product listener...");
                setupProductListener();
                productListenerAttached = true;
            } else if (!currentUserId && productListenerUnsubscribe) {
                console.log("Unsubscribing from product listener...");
                productListenerUnsubscribe();
                productListenerUnsubscribe = null;
                productListenerAttached = false;
            }
        });

        // YÃ¶netici GiriÅŸi Toggle Butonu
        toggleAdminBtn.addEventListener('click', async () => {
            if (isAdmin || (auth.currentUser && !auth.currentUser.isAnonymous && auth.currentUser.uid !== adminUid)) {
                // YÃ¶netici veya normal kullanÄ±cÄ± ise Ã‡Ä±kÄ±ÅŸ yap ve anonim giriÅŸe dÃ¶n
                try {
                    await signOut(auth);
                    await signInAnonymously(auth); 
                    showMessage('BaÅŸarÄ±yla Ã§Ä±kÄ±ÅŸ yapÄ±ldÄ±.', 'success');
                    showView('homeView');
                } catch (error) {
                    console.error("Ã‡Ä±kÄ±ÅŸ hatasÄ±:", error);
                    showMessage(`Ã‡Ä±kÄ±ÅŸ hatasÄ±: ${error.message}`, 'error');
                }
            } else {
                // ZiyaretÃ§i ise YÃ¶netici GiriÅŸ ModalÄ±nÄ± aÃ§
                openModal('adminLoginModal');
            }
        });

        // YÃ¶netici GiriÅŸ Formu
        document.getElementById('adminLoginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('adminLoginEmail').value;
            const password = document.getElementById('adminLoginPassword').value;
            const btn = document.getElementById('adminLoginSubmitBtn');
            const text = document.getElementById('adminLoginSubmitText');
            const loader = document.getElementById('adminLoginSubmitLoader');

            setButtonLoading(btn, text, loader, true);
            try {
                const result = await signInWithEmailAndPassword(auth, email, password);
                
                if (result.user.uid !== adminUid) {
                    // GiriÅŸ yapan kiÅŸi admin deÄŸilse, hemen Ã§Ä±kÄ±ÅŸ yap ve anonim giriÅŸe dÃ¶n
                    await signOut(auth);
                    await signInAnonymously(auth);
                    showMessage('YÃ¶netici yetkisi reddedildi. LÃ¼tfen doÄŸru hesabÄ± kullanÄ±n.', 'error');
                } else {
                    // BaÅŸarÄ±lÄ± Admin GiriÅŸi
                    closeModal('adminLoginModal');
                    showMessage('YÃ¶netici olarak giriÅŸ yapÄ±ldÄ±!', 'success');
                }

            } catch (error) {
                console.error("YÃ¶netici GiriÅŸ hatasÄ±:", error.code, error.message);
                if (error.code === 'auth/operation-not-allowed') {
                    showMessage('GiriÅŸ hatasÄ±: E-posta/Åifre ile giriÅŸ Firebase projenizde etkinleÅŸtirilmemiÅŸ.', 'error');
                } else if (error.code === 'auth/wrong-password' || error.code === 'auth/user-not-found') {
                    showMessage('GeÃ§ersiz e-posta veya ÅŸifre.', 'error');
                }
                 else {
                    showMessage(`GiriÅŸ hatasÄ±: ${error.message}`, 'error');
                }
            } finally {
                setButtonLoading(btn, text, loader, false);
            }
        });


        // === FIRESTORE (ÃœRÃœNLER) ===

        // Tek bir Ã¼rÃ¼n olduÄŸu iÃ§in statik data kullanÄ±yoruz.
        const initialProducts = [
            {
                id: 'ALTINKOD_ANALIZ',
                name: 'AltÄ±n Stok Analizi (MasaÃ¼stÃ¼ UygulamasÄ±)',
                description: 'Kuyumcular, dÃ¶viz bÃ¼rolarÄ± ve metal ticareti yapan firmalar iÃ§in tasarlanmÄ±ÅŸ, entegre stok, kÃ¢r/zarar ve mÃ¼ÅŸteri yÃ¶netim sistemi.',
                price: 9999, // YÃ¼ksek fiyat sembolik olarak Premium olduÄŸunu belirtir
                category: 'Kurumsal YazÄ±lÄ±m',
                imageUrl: 'https://placehold.co/600x400/0A0A0C/F59E0B?text=ALTINKOD+ANALIZ+PLATFORMU',
                features: `
- Stok ve Envanter YÃ¶netimi (Ã‡oklu Kategori DesteÄŸi: AltÄ±n, Ziynet, Hurda, DÃ¶viz)
- AnlÄ±k Piyasa Verileri (Harem AltÄ±n API) ile Gram AltÄ±n, USD ve EUR kurlarÄ±nÄ±n otomatik gÃ¼ncellenmesi.
- Kasa YÃ¶netimi (Cash Register): GÃ¼nlÃ¼k kasa aÃ§Ä±lÄ±ÅŸ/kapanÄ±ÅŸ, nakit giriÅŸ/Ã§Ä±kÄ±ÅŸ takibi.
- Ä°ÅŸlem KaydÄ± ve KÃ¢r HesaplamasÄ±: AlÄ±m/satÄ±m iÅŸlemlerinde anlÄ±k maliyet ve kÃ¢r/zarar (Gram KarÄ± dahil) hesaplama.
- MÃ¼ÅŸteri KartlarÄ±: DetaylÄ± mÃ¼ÅŸteri bilgileri, kÃ¼mÃ¼latif kÃ¢r takibi ve geÃ§miÅŸ iÅŸlem listeleme.
- BorÃ§/Alacak Defteri (Ledger): ALACAKLI, VERECEKLÄ° ve EMANET kayÄ±tlarÄ±nÄ±n takibi.
- Ã‡oklu Ã–deme YÃ¶ntemi: PeÅŸin, Kart (POS Komisyonu dahil), Havale/EFT kaydÄ±.
- Barkod & RFID Entegrasyonu: ÃœrÃ¼nlere barkod/RFID ID atama ve hÄ±zlÄ± envanter sayÄ±mÄ± yapma.
- Raporlama ve Analiz: GÃ¼nlÃ¼k iÅŸlem raporlarÄ±, aylÄ±k kÃ¢r/zarar grafikleri.
                `,
            }
        ];
        
        // Product listesi boÅŸsa ve admin deÄŸilse otomatik olarak Ã¶rnek Ã¼rÃ¼nÃ¼ ekleyelim
        async function checkAndAddInitialProduct() {
             const productsRef = collection(db, productsCollectionPath);
             try {
                 const snapshot = await getDocs(productsRef);
                 if (snapshot.empty && adminUid === "OjI7tjOFu5NlOkrVrvqbY8yZUiD3") {
                     for(const product of initialProducts) {
                         const docRef = doc(productsRef, product.id);
                         await setDoc(docRef, product);
                         console.log(`Initial product ${product.id} added.`);
                     }
                 }
                 // EÄŸer admin deÄŸilse ve Ã¼rÃ¼n yoksa, bu sefer sadece statik olarak ekleyelim (Bu Canvas ortamÄ±nda en iyi Ã§Ã¶zÃ¼m)
                 if (snapshot.empty || true) { // Statik Ã¼rÃ¼nÃ¼ her zaman gÃ¶stermek iÃ§in
                     renderProductCards(initialProducts);
                     if(initialProducts.length > 0) {
                         // Sayfa ilk yÃ¼klendiÄŸinde otomatik olarak detay sayfasÄ±na yÃ¶nlendir.
                         loadProductDetail(initialProducts[0].id); 
                     }
                 }
             } catch(e) {
                 console.warn("ÃœrÃ¼n kontrolÃ¼/ekleme hatasÄ± (Firebase'e eriÅŸim sorunu olabilir), statik data kullanÄ±lÄ±yor:", e);
                 renderProductCards(initialProducts);
                 if(initialProducts.length > 0) {
                      loadProductDetail(initialProducts[0].id);
                 }
             }
        }


        function setupProductListener() {
            // Sadece tek bir Ã¼rÃ¼n olduÄŸu iÃ§in, Firebase dinleyicisini kaldÄ±rÄ±p, statik datadan yÃ¼klÃ¼yoruz.
            // Bu, sitenin tek Ã¼rÃ¼n tanÄ±tÄ±m amacÄ±na uygun en hÄ±zlÄ± ve kararlÄ± yÃ¶ntemdir.
            checkAndAddInitialProduct();
        }


        function renderProductCards(products) {
            productsLoading.style.display = 'none';
            productList.innerHTML = ''; 
            
            if (products.length === 0) {
                productList.innerHTML = '<p class="text-slate-400 text-center col-span-3">HenÃ¼z hiÃ§ yazÄ±lÄ±m eklenmemiÅŸ.</p>';
                return;
            }
            
            let delay = 0; // AOS animasyon gecikmesi iÃ§in
            products.forEach((product) => {
                const productId = product.id;
                productList.innerHTML += createProductCard(product, productId, delay);
                delay += 100; // Her kart iÃ§in gecikmeyi artÄ±r
            });

            document.querySelectorAll('.product-card-link').forEach(card => {
                card.addEventListener('click', (e) => {
                    e.preventDefault();
                    const id = card.dataset.id;
                    const productData = products.find(p => p.id === id);
                    if(productData) loadProductDetail(id, productData);
                });
            });
            
            AOS.refresh();
        }

        function createProductCard(product, id, delay) {
            return `
                <a href="#" id="productCard_${id}" class="product-card-link product-card block rounded-lg shadow-lg bg-gray-900/50" data-id="${id}" data-aos="fade-up" data-aos-delay="${delay}">
                    <div class="flex flex-col lg:flex-row items-center p-6 space-y-4 lg:space-y-0 lg:space-x-6">
                        <img class="w-24 h-24 object-cover rounded-xl border border-amber-400 p-1" src="${product.imageUrl}" alt="[${product.name} gÃ¶rseli]" onerror="this.src='https://placehold.co/96x96/1A1A1E/F59E0B?text=LOGO';">
                        <div class="flex-grow text-center lg:text-left">
                            <span class="inline-block bg-amber-400/10 text-amber-300 text-xs font-semibold px-3 py-1 rounded-full mb-3">${product.category}</span>
                            <h3 class="text-2xl font-bold text-white mb-2">${product.name}</h3>
                            <p class="text-slate-400 text-sm mb-0">${product.description}</p>
                        </div>
                        <div class="flex-shrink-0 text-right">
                            <div class="text-3xl font-bold text-amber-400">${product.price} TL</div>
                            <button class="btn btn-primary btn-sm mt-2 px-6">Detay & Teklif Al</button>
                        </div>
                    </div>
                </a>
            `;
        }

        async function loadProductDetail(productId, product) {
            showView('productDetailView');
            productDetailView.innerHTML = `
                <div class="flex justify-center items-center py-20">
                    <div class="loader"></div>
                    <p class="ml-4 text-slate-400">YazÄ±lÄ±m detaylarÄ± yÃ¼kleniyor...</p>
                </div>
            `;
            
            // EÄŸer Firebase'den gelmediyse, statik datayÄ± kullan
            if (!product) {
                product = initialProducts.find(p => p.id === productId);
                if (!product) {
                    productDetailView.innerHTML = '<p class="text-red-400 text-center">Bu Ã¼rÃ¼n bulunamadÄ±.</p>';
                    return;
                }
            }

            productDetailView.innerHTML = createProductDetailLayout(product, productId);
            
            setupProductDetailListeners(product, productId);
            
            AOS.refresh();
        }

        function createProductDetailLayout(product, productId) {
            const featuresList = (product.features || "")
                .split('\n')
                .filter(line => line.trim() !== '' && line.startsWith('-'))
                .map((line, index) => `
                    <li class="flex items-start space-x-3" data-aos="fade-left" data-aos-delay="${index * 50}">
                        <svg class="flex-shrink-0 w-5 h-5 text-amber-400 mt-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        <span class="text-slate-300">${line.replace(/^-/, '').trim()}</span>
                    </li>
                `)
                .join('');
            
            // Yorum formunun gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼nÃ¼ anonim kullanÄ±cÄ±lar iÃ§in devre dÄ±ÅŸÄ± bÄ±rak
            const canComment = auth.currentUser && !auth.currentUser.isAnonymous && isUserLoggedIn;

            return `
                <div class="grid lg:grid-cols-2 gap-12 items-start detail-card p-8 rounded-xl">
                    <!-- Sol Taraf (GÃ¶rsel ve Fiyat) -->
                    <div data-aos="fade-in">
                        <!-- GÃ¼ncellenen GÃ¶rsel AlanÄ± -->
                        <img src="https://placehold.co/800x600/1A1A1E/F59E0B?text=ALTINKOD+ANALIZ+SISTEMI" alt="[AltÄ±n Stok Analizi arayÃ¼z gÃ¶rseli]" class="w-full rounded-lg shadow-lg border border-amber-400 mb-6" onerror="this.src='https://placehold.co/800x600/1A1A1E/F59E0B?text=ALTINKOD+UYGULAMA+ARAYUZU';">
                        <div class="bg-gray-900/50 p-6 rounded-lg border border-gray-800 flex justify-between items-center" data-aos="fade-up" data-aos-delay="100">
                            <div>
                                <span class="text-sm text-slate-400">Fiyat Teklifi</span>
                                <p class="text-4xl font-bold text-amber-400">${product.price} TL + KDV</p>
                            </div>
                            <a href="#contact" class="btn btn-primary btn-lg text-lg px-10 py-4" onclick="document.getElementById('contactName').focus();">Teklif Al / SatÄ±n Al</a>
                        </div>
                    </div>
                    
                    <!-- SaÄŸ Taraf (AÃ§Ä±klama ve Sekmeler) -->
                    <div data-aos="fade-in" data-aos-delay="100">
                        <span class="inline-block bg-amber-400/10 text-amber-300 text-xs font-semibold px-3 py-1 rounded-full mb-3">${product.category}</span>
                        <h2 class="text-5xl font-bold text-white mb-4">${product.name}</h2>
                        <p class="text-lg text-slate-300 mb-8">${product.description}</p>
                        
                        <!-- Sekmeler -->
                        <div class="border-b border-gray-700 mb-6">
                            <nav class="flex space-x-4">
                                <button class="tab active" data-tab="features">ğŸš€ KapsamlÄ± Ã–zellikler</button>
                                <button class="tab" data-tab="reviews">â­ Yorumlar</button>
                            </nav>
                        </div>

                        <!-- Sekme Ä°Ã§erikleri -->
                        <div id="tabContent">
                            <!-- Ã–zellikler Sekmesi -->
                            <div id="tab-features">
                                <!-- GEMINI Ã–ZET -->
                                <div class="bg-gray-900/50 p-5 rounded-lg border border-gray-800 mb-6" data-aos="fade-up">
                                    <h4 class="text-lg font-semibold text-white mb-3">âœ¨ Yapay Zeka Ã–zeti</h4>
                                    <div id="geminiSummaryContent" class="text-slate-300">
                                        <div class="flex items-center">
                                            <div class="loader w-6 h-6"></div>
                                            <span class="ml-3">Yapay zeka Ã¶zellikleri Ã¶zetliyor...</span>
                                        </div>
                                    </div>
                                    <button id="geminiSummaryBtn" class="btn btn-secondary text-sm mt-4 hidden">Yeniden Ã–zetle</button>
                                </div>
                                <!-- /GEMINI Ã–ZET -->

                                <h4 class="text-xl font-semibold text-white mb-4 border-l-4 border-amber-400 pl-3">TÃ¼m ModÃ¼ller ve Fonksiyonlar</h4>
                                <ul class="space-y-3">
                                    ${featuresList || '<li class="text-slate-400" data-aos="fade-left">Bu Ã¼rÃ¼n iÃ§in Ã¶zellik listesi eklenmemiÅŸ.</li>'}
                                </ul>
                            </div>

                            <!-- Yorumlar Sekmesi -->
                            <div id="tab-reviews" class="hidden">
                                <h4 class="text-xl font-semibold text-white mb-6">KullanÄ±cÄ± YorumlarÄ±</h4>
                                
                                <!-- GEMINI YORUM Ã–ZETÄ° -->
                                <div class="bg-gray-900/50 p-5 rounded-lg border border-gray-800 mb-6">
                                    <h4 class="text-lg font-semibold text-white mb-3">âœ¨ YorumlarÄ±n Yapay Zeka Ã–zeti</h4>
                                    <div id="geminiReviewSummaryContent" class="text-slate-300 prose prose-invert prose-sm">
                                        <p class="text-slate-400">YorumlarÄ± analiz etmek iÃ§in butona tÄ±klayÄ±n.</p>
                                    </div>
                                    <button id="geminiReviewSummaryBtn" class="btn btn-secondary text-sm mt-4 flex items-center">
                                        <div class="gemini-loader mr-2"></div>
                                        YorumlarÄ± Analiz Et
                                    </button>
                                </div>
                                <!-- /GEMINI YORUM Ã–ZETÄ° -->

                                <!-- Yorum Ekleme Formu -->
                                <form id="commentForm" class="mb-8 ${canComment ? '' : 'hidden'}">
                                    <textarea id="commentText" rows="3" class="form-input mb-3" placeholder="Bu yazÄ±lÄ±m hakkÄ±nda yorumunuzu yazÄ±n..."></textarea>
                                    <button type="submit" id="submitCommentBtn" class="btn btn-primary">Yorumu GÃ¶nder</button>
                                </form>
                                <p id="commentLoginMessage" class="${canComment ? 'hidden' : ''} text-slate-400 mb-6">Yorum yapma yetkisi sadece kayÄ±tlÄ± mÃ¼ÅŸterilere aittir.</p>

                                <!-- Yorum Listesi -->
                                <div id="commentList" class="space-y-6">
                                    <p class="text-slate-400">Yorumlar yÃ¼kleniyor...</p>
                                    <!-- Yorumlar buraya eklenecek -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // ÃœrÃ¼n Detay SayfasÄ± Olay Dinleyicileri (Sekmeler, Yorumlar, Gemini)
        function setupProductDetailListeners(product, productId) {
            // Sekme YÃ¶netimi
            const tabs = document.querySelectorAll('.tab');
            const tabFeatures = document.getElementById('tab-features');
            const tabReviews = document.getElementById('tab-reviews');

            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    if (tab.dataset.tab === 'features') {
                        tabFeatures.classList.remove('hidden');
                        tabReviews.classList.add('hidden');
                    } else {
                        tabFeatures.classList.add('hidden');
                        tabReviews.classList.remove('hidden');
                    }
                });
            });

            // Yorum listesi dinleyicisini kur
            setupCommentListener(productId);

            // Yorum formu
            document.getElementById('commentForm')?.addEventListener('submit', async (e) => {
                e.preventDefault();
                // Yorum yapma yetkisi sadece anonim olmayan kullanÄ±cÄ±larda olacak
                if (!auth.currentUser || auth.currentUser.isAnonymous) {
                    showMessage("Yorum yapma yetkiniz yok.", "error");
                    return;
                }
                
                const commentText = document.getElementById('commentText').value;
                if (commentText.trim() === '') {
                    showMessage("LÃ¼tfen bir yorum yazÄ±n.", "error");
                    return;
                }

                try {
                    await addDoc(collection(db, commentsCollectionPath(productId)), {
                        text: commentText,
                        userId: auth.currentUser.uid,
                        userEmail: auth.currentUser.email || 'KullanÄ±cÄ±',
                        createdAt: serverTimestamp()
                    });
                    document.getElementById('commentText').value = '';
                    showMessage("Yorumunuz baÅŸarÄ±yla eklendi.", "success");
                } catch (error) {
                    console.error("Yorum ekleme hatasÄ±: ", error);
                    showMessage(`Yorum eklenemedi: ${error.message}`, "error");
                }
            });
            

            // Gemini Ã–ZELLÄ°K Ã–zet Butonu
            const geminiSummaryContent = document.getElementById('geminiSummaryContent');
            const geminiSummaryBtn = document.getElementById('geminiSummaryBtn');
            
            async function fetchSummary() {
                geminiSummaryContent.innerHTML = `
                    <div class="flex items-center">
                        <div class="loader w-6 h-6"></div>
                        <span class="ml-3">Yapay zeka Ã¶zellikleri Ã¶zetliyor...</span>
                    </div>`;
                geminiSummaryBtn.classList.add('hidden');

                const summary = await getGeminiSummary(product.features);
                if (summary) {
                    // Markdown'Ä± HTML'e Ã§evir (basitÃ§e)
                    let htmlSummary = summary.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    geminiSummaryContent.innerHTML = `<p class="text-slate-300 italic">${htmlSummary}</p>`;
                } else {
                    geminiSummaryContent.innerHTML = '<p class="text-red-400">Ã–zet yÃ¼klenemedi.</p>';
                }
                geminiSummaryBtn.classList.remove('hidden');
            }
            geminiSummaryBtn.addEventListener('click', fetchSummary);
            fetchSummary(); // Sayfa yÃ¼klenince Ã¶zeti otomatik Ã§ek

            // Gemini YORUM Ã–zet Butonu
            const geminiReviewSummaryContent = document.getElementById('geminiReviewSummaryContent');
            const geminiReviewSummaryBtn = document.getElementById('geminiReviewSummaryBtn');
            geminiReviewSummaryBtn.addEventListener('click', async () => {
                const loader = geminiReviewSummaryBtn.querySelector('.gemini-loader');
                loader.classList.add('loading');
                geminiReviewSummaryBtn.disabled = true;
                geminiReviewSummaryContent.innerHTML = `
                    <div class="flex items-center">
                        <div class="loader w-6 h-6"></div>
                        <span class="ml-3">TÃ¼m yorumlar analiz ediliyor...</span>
                    </div>`;

                try {
                    // YorumlarÄ± veritabanÄ±ndan Ã§ek
                    const q = query(collection(db, commentsCollectionPath(productId)));
                    const querySnapshot = await getDocs(q);
                    
                    if (querySnapshot.empty) {
                        geminiReviewSummaryContent.innerHTML = '<p class="text-slate-400">Analiz edilecek yorum bulunamadÄ±.</p>';
                        return;
                    }

                    const allCommentsText = querySnapshot.docs.map(doc => doc.data().text).join('\n---\n');
                    const reviewSummary = await getGeminiReviewSummary(allCommentsText);

                    if (reviewSummary) {
                        let htmlSummary = reviewSummary
                            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                            .replace(/\n/g, '<br>'); // Markdown yeni satÄ±rlarÄ±
                        geminiReviewSummaryContent.innerHTML = `<div class="prose prose-sm prose-invert text-slate-300">${htmlSummary}</div>`;
                    } else {
                        geminiReviewSummaryContent.innerHTML = '<p class="text-red-400">Yorum Ã¶zeti yÃ¼klenemedi.</p>';
                    }

                } catch (error) {
                    console.error("Yorum Ã¶zeti alÄ±nÄ±rken hata:", error);
                    geminiReviewSummaryContent.innerHTML = `<p class="text-red-400">Analiz hatasÄ±: ${error.message}</p>`;
                } finally {
                    loader.classList.remove('loading');
                    geminiReviewSummaryBtn.disabled = false;
                }
            });
        }

        // YorumlarÄ± Dinle (GerÃ§ek ZamanlÄ±)
        function setupCommentListener(productId) {
            const commentList = document.getElementById('commentList');
            const q = query(collection(db, commentsCollectionPath(productId)));
            
            onSnapshot(q, (snapshot) => {
                commentList.innerHTML = '';
                if (snapshot.empty) {
                    commentList.innerHTML = '<p class="text-slate-400">HenÃ¼z yorum yapÄ±lmamÄ±ÅŸ. Ä°lk yorumu siz yapÄ±n!</p>';
                    return;
                }
                snapshot.forEach((doc) => {
                    const comment = doc.data();
                    const createdAt = comment.createdAt?.toDate().toLocaleDateString('tr-TR') || '...';
                    const userHandle = comment.userEmail ? comment.userEmail.split('@')[0] : (comment.userId ? `UID:${comment.userId.substring(0, 8)}...` : 'ZiyaretÃ§i');
                    
                    commentList.innerHTML += `
                        <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                            <p class="text-slate-300 mb-2">${comment.text}</p>
                            <span class="text-xs text-amber-400 font-semibold">${userHandle}</span>
                            <span class="text-xs text-slate-500"> - ${createdAt}</span>
                        </div>
                    `;
                });
            }, (error) => {
                console.error("YorumlarÄ± Ã§ekerken hata: ", error);
                commentList.innerHTML = `<p class="text-red-400">Yorumlar yÃ¼klenemedi: ${error.message}</p>`;
            });
        }


        // === YARDIMCI FONKSÄ°YONLAR ===
        function setButtonLoading(button, textElement, loaderElement, isLoading) {
            if (isLoading) {
                textElement.classList.add('hidden');
                loaderElement.classList.remove('hidden');
                button.disabled = true;
            } else {
                textElement.classList.remove('hidden');
                loaderElement.classList.add('hidden');
                button.disabled = false;
            }
        }


        // === BAÅLANGIÃ‡ & Ä°LK KÄ°MLÄ°K DOÄRULAMA ===
        
        async function initializeAppAndAuth() {
            console.log("Initializing Auth...");
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    console.log("Found initial auth token. Signing in with custom token...");
                    await signInWithCustomToken(auth, __initial_auth_token);
                    console.log("Sign in with custom token successful.");
                } else {
                    console.log("No initial auth token. Signing in anonymously...");
                    if (!auth.currentUser) {
                         await signInAnonymously(auth);
                         console.log("Anonymous sign-in successful.");
                    } else {
                        console.log("User already exists, no need for anonymous sign-in.");
                    }
                }
            } catch (error) {
                console.error("Initial sign-in error:", error);
                showMessage("Kimlik doÄŸrulama baÅŸlatÄ±lamadÄ±. LÃ¼tfen sayfayÄ± yenileyin.", "error");
                
                // Anonim giriÅŸi zorla (hata sonrasÄ± yetki sorununu Ã§Ã¶zmek iÃ§in)
                if (!auth.currentUser || (auth.currentUser && !auth.currentUser.isAnonymous)) {
                    try {
                        await signOut(auth); // Mevcut oturumu (varsa) kapat
                        await signInAnonymously(auth);
                        console.log("Fallback anonymous sign-in successful.");
                    } catch (anonError) {
                        console.error("Fallback anonymous sign-in error:", anonError);
                    }
                }
            }
        }

        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // AOS'u baÅŸlat
        AOS.init({
            duration: 600, // Animasyon sÃ¼resi
            once: true, // Animasyonlar sadece bir kez Ã§alÄ±ÅŸsÄ±n
            offset: 50, // Tetiklenme mesafesi
        });
        
        // UygulamayÄ± baÅŸlat!
        initializeAppAndAuth();

        // YÃ¶nlendirmeyi burada baÅŸlatÄ±yoruz
        // setupProductListener(); // Zaten auth state changed iÃ§inde Ã§aÄŸrÄ±lÄ±yor.

        // Ä°letiÅŸim Formu gÃ¶nderme (Sadece simÃ¼lasyon)
        document.getElementById('contactForm').addEventListener('submit', (e) => {
            e.preventDefault();
            showMessage('Teklif/SatÄ±n Alma talebiniz baÅŸarÄ±yla iletildi!', 'success');
            document.getElementById('contactForm').reset();
            window.scrollTo(0, 0); 
        });

    </script>

</body>
</html>
